{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <title>Home</title>
    <link rel="shortcut icon" href="{% static 'images/favicon.png'%}" type="image/x-icon">
    <link rel="stylesheet" type="text/css" href="{% static 'css/animate.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/bootstrap.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/main.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/plugins.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/red-color.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/responsive.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/yellow-color.css' %}">
</head>
<body itemscope>
    <main>
        <div class="preloader">
            <div id="cooking">
                <div class="bubble"></div>
                <div class="bubble"></div>
                <div class="bubble"></div>
                <div class="bubble"></div>
                <div class="bubble"></div>
                <div id="area">
                    <div id="sides">
                        <div id="pan"></div>
                        <div id="handle"></div>
                    </div>
                    <div id="pancake">
                        <div id="pastry"></div>
                    </div>
                </div>
            </div>
        </div>

        <header class="stick">
            <div class="logo-menu-sec">
                <div class="container">
                    <div class="logo"><h1 itemprop="headline"><a href="" title="Home" itemprop="url"><img src="{% static 'images/logo2.jpg' %}" alt="logo.png" itemprop="image"></a></h1></div>
                    <nav>
                        <div class="menu-sec">
                            <ul>
                                <li class="menu-item-has-children"><a title="Search Restaurants" itemprop="url"><span class="red-clr">REAL REVIEW</span><a >Search</a></li>
								<li class="menu-item-has-children"><a title="How to use our website" itemprop="url"><span class="red-clr">REAL REVIEW</span><a href="#intro">Introduction</a></li>
                            </ul>
                            <a class="red-bg brd-rd4" title="Share" itemprop="url">Share With Friends</a>
                        </div>
                    </nav>
                </div>
            </div>
        </header>

        <section>
            <div class="block">
                <div style="background-image: url(/static/images/topbg.jpg);" class="fixed-bg"></div>
                <div class="restaurant-searching text-center">
                    <div class="restaurant-searching-inner">
                        <h2 itemprop="headline">Find <span>the Real Reviews</span> from Our Restaurants</h2>
                        <div class="restaurant-search-form brd-rd2">
                            <div class="row mrg10">
                                <div class="loading">
				                    <img src="/static/images/loading3.gif">
				                </div>
                                <div class="col-md-10 col-sm-9 col-lg-9 col-xs-20">
                                    <div class="input-field brd-rd2">
                                        <input class="brd-rd2" type="text" placeholder="Restaurant Link" id="address" name="business_url">
                                    </div>
                                </div>
                                <div class="col-md-2 col-sm-3 col-lg-3 col-xs-12">
                                    <button class="brd-rd2 red-bg" id="button">SEARCH</button>
                                </div>
                            </div>
                        </div>
                        <div class="funfacts">
                                <div class="col-md-3 col-sm-6 col-lg-3">
                                    <div class="fact-box">
                                        <i class="brd-rd50"><img src="{% static 'images/resource/fact-icon3.png' %}" alt="fact-icon1" itemprop="image"></i>
                                        <div class="fact-inner">
                                            <strong><span>Dataset</span></strong>
                                            <h5>contains</h5>
                                        </div>
                                    </div><!-- Fact Box -->
                                </div>
                                <div class="col-md-3 col-sm-6 col-lg-3">
                                    <div class="fact-box">
                                        <i class="brd-rd50"><img src="{% static 'images/resource/fact-icon1.png' %}" alt="fact-icon2" itemprop="image"></i>
                                        <div class="fact-inner">
                                            <strong><span class="counter">150</span>+</strong>
                                            <h5>Restaurants</h5>
                                        </div>
                                    </div><!-- Fact Box -->
                                </div>
                                <div class="col-md-3 col-sm-6 col-lg-3">
                                    <div class="fact-box">
                                        <i class="brd-rd50"><img src="{% static 'images/resource/fact-icon2.png' %}" alt="fact-icon3" itemprop="image"></i>
                                        <div class="fact-inner">
                                            <strong><span class="counter">29000</span>+</strong>
                                            <h5>Reviewers</h5>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3 col-sm-6 col-lg-3">
                                    <div class="fact-box">
                                        <i class="brd-rd50"><img src="{% static 'images/resource/fact-icon4.png' %}" alt="fact-icon4" itemprop="image"></i>
                                        <div class="fact-inner">
                                            <strong><span class="counter">29000</span>+</strong>
                                            <h5>Reviews</h5>
                                        </div>
                                    </div>
                                </div>
                        </div>
                    </div>
                    <img class="bottom-clouds-mockup" src="{% static 'images/resource/clouds.png' %}" alt="clouds.png" itemprop="image">
                </div>
            </div>
        </section>

        <section>
            <div class="block remove-bottom">
                <div class="container">
                    <div class="row">
                        <div class="col-md-12 col-sm-12 col-lg-12">
                            <h2><span style="color:white">1</span></h2>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section>
            <div class="block blackish low-opacity" id="intro">
                <div class="fixed-bg" style="background-image: url({% static 'images/parallax1.jpg' %});"></div>
                <div class="container">
                    <div class="row">
                        <div class="col-md-12 col-sm-12 col-lg-12">
                            <div class="title1-wrapper text-center">
                                <div class="title1-inner">
                                    <span>Website for Real Reviews Recommendation</span>
                                    <h2 class="text-white" itemprop="headline">easy filter in 3 steps</h2>
                                </div>
                            </div>
                            <div class="remove-ext text-center" style="width:100%">
                                <div class="row">
                                    <div class="col-md-4 col-sm-4 col-lg-4">
                                        <div class="step-box wow fadeIn" data-wow-delay="0.2s">
                                            <i><img src="{% static 'images/resource/setp-img1.png' %}" alt="setp-img1.png" itemprop="image"> <span class="brd-rd50 red-bg">1</span></i>
                                            <div class="setp-box-inner">
                                                <h4 itemprop="headline">Explore Restaurants</h4>
                                                <p itemprop="description">Find the interested restaurants from the websets of Yelp</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4 col-sm-4 col-lg-4">
                                        <div class="step-box wow fadeIn" data-wow-delay="0.4s">
                                            <i><img src="{% static 'images/resource/setp-img2.png' %}" alt="setp-img2.png" itemprop="image"> <span class="brd-rd50 red-bg">2</span></i>
                                            <div class="setp-box-inner">
                                                <h4 itemprop="headline">Upload the Web Link</h4>
                                                <p itemprop="description">Provide us the web link of your restaurant once a time and we will process the algorithm</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4 col-sm-4 col-lg-4">
                                        <div class="step-box wow fadeIn" data-wow-delay="0.6s">
                                            <i><img src="{% static 'images/resource/setp-img3.png' %}" alt="setp-img3.png" itemprop="image"> <span class="brd-rd50 red-bg">3</span></i>
                                            <div class="setp-box-inner">
                                                <h4 itemprop="headline">Display the Results</h4>
                                                <p itemprop="description">After filtering, the info of the recommended reviews will be diplayed</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <div class="bottom-bar dark-bg text-center">
            <div class="container">
                <p itemprop="description">MSc(CS) Project form the University of Hong Kong. <a target="_blank" href="https://i.cs.hku.hk/~msp18019/">Details of the project</a></p>
            </div>
        </div>
    </main>

    <script src="{% static 'js/jquery.min.js' %}"></script>
    <script src="{% static 'js/bootstrap.min.js' %}"></script>
    <script src="{% static 'js/filter.js' %}"></script>
    <script src="{% static 'js/main.js' %}"></script>
    <script src="{% static 'js/plugins.js' %}"></script>
    <script>
    $(
        function () {
            $("#button").click(
                function () {
		    url = $('#address').val()
                    $.ajax(
                        {
                            url: "crawl/",//请求的地址
                            type: "post",//请求的方式，get或者post
                            data: {
                                'url': url
                            },//请求的数据
                            success:function (data1) {
                                console.log(data1)
                                var task_id = data1['task_id']
				                node = $('.restaurant-search-form > div.row.mrg10 > div')
				                node.css('display', 'block')

                                setInterval(function() {
                                    $.ajax(
                                        {
                                            url: "crawl/",
                                            type: "get",
                                            data: {
                                                'task_id': task_id
                                            },
                                            success: function (data2) {
                                                console.log(data2)
                                                if(data2.status && data2.status == 'finished') {
                                                    window.location.href = "list?url="+url
                                                }
                                            },
                                            error: function (error) {
                                                console.log(error)
                                            }
                                        }
                                    )
                                }, 1000)

                            },//请求成功后执行的函数
                            error:function (error) {
                                console.log(error)
                            }//请求失败后执行的函数
                        }
                    )//创建ajax对象
                }
            )
        }
    )
    </script>
</body>
</html>
